This builds on the main `run.sh` script but adds an additional wired interface to perform [802.1X](https://en.wikipedia.org/wiki/IEEE_802.1X) testing over.

At the other end of the wired interface is `hostapd` playing the part as an 'Authenticator' that sends RADIUS requests to FreeRADIUS configured as the 'Authentication Server'.

This exercises your Windows 11 or 10 VM with 802.1X in a 100% automated fashion:

 * fetches and compiles FreeRADIUS (branch `3.2.x`) to be used as the 'Authentication Server'
 * fetches and compiles `hostapd` (branch `main`) to be used as the 'Authenticator'
 * generates a number of logs placed in `logs` from the test run
    * running `tcpdump` and generates a `dump.pcapng` with the [SSL key file embedded](https://wiki.wireshark.org/TLS#embedding-decryption-secrets-in-a-pcapng-file)
    * `STDOUT` from FreeRADIUS
    * `STDOUT` from `hostapd`
    * optionally the NetTrace `.etl` file generated by Windows

To run the test use:

    env IMAGE=../../win10.qcow2 TEST=teap/machine,user/tls,eap-mschapv2 ... sh run.sh

Where:
 * all the environment variable parameters supported by the main project `vm.sh` script
 * **`TEST`:** test to run
    * path of where the test is (eg. `eap-ttls/pap` or `teap/user/eap-mschapv2`)
    * [`teap/machine,user/tls,tls` does not work](./tests/teap/machine,user/tls,tls/)
 * **`NETTRACE`:** capture an ETL (and dumped text format version)
    * TEAP provides useful tracing here, I have not seen the other methods (eg. EAP-TTLS, PEAP, ...) provide anything
    * you should look to [Notes on Windows 10/11 EAP Tracing](https://gist.github.com/jimdigriz/327ef6afa808a1b291d12d68857dec05) for some hints on how to use this

The exit code reflects the status of the authentication:

 * **`0`:** successful
 * **`1`:** failure
 * **`2`:** timeout (after ~30 seconds)

This test was developed to assist in [interop testing for RFC7170bis](https://github.com/emu-wg/rfc7170bis/wiki/Interop-Testing).

For others, they may find it useful to see the use in Windows of `netsh lan add profile ...` and `netsh lan set eapuserdata ...` and the accompanying XML documents they use.
